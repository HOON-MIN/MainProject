<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.main.ateam.hospital.dao.HospitalDao">

<select id="getList" resultType="hvo">
	SELECT rownum r_num,c.cnum,h.hname,h.hloc,h.otime,
	h.ctime,h.hcate,h.htel,h.hurl,c.cdate,
	c.ccate from hospital h, company c 
	where h.cnum = c.cnum and c.cstatus=1
</select>

<select id="getDetail" parameterType="int" resultType="hvo">
	select * from hospital where cnum=#{num}
</select>
<select id="hospCheck" parameterType="map" resultType="int">
	select hname from hospital where crn=#{crn}
</select>
<insert id="addCompany" parameterType="cvo">
 		insert into company 
        values(company_seq.nextVal, #{crn}, #{cpwd}, #{ccate}, sysdate)
</insert>
<insert id="addHospital" parameterType="hvo">
	<selectKey keyProperty="cnum" resultType="int" order="BEFORE">
		select company_seq.currVal from dual
	</selectKey>
	insert into hospital values(#{cnum},#{hname}
	,#{hloc},#{otime},#{ctime},#{hcate},#{hurl},#{hemail},#{hgrade})
</insert>

 <!-- crn 중복체크 -->
 <select id="crnCheck" parameterType="map" resultType="int">
 select count(*) from hospital where crn = #{crnv}
 </select>


</mapper>

