<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.main.ateam.doctor.dao.DoctorDao">

<select id="doctorLogin" parameterType="map" resultType="doctorVO">
  	select * from doctor where did=#{did, jdbcType=VARCHAR} and dpwd=#{dpwd ,jdbcType=VARCHAR}
  	</select>
  	
  	<select id="idchk" parameterType="map" resultType="int">
	select count(*) from doctor where did=#{did} and dpwd=#{dpwd}
</select>


<resultMap type="doctorVO" id="hospitalDoctorResult">
<id property="hnum" column ="hnum"/>
<result property="dnum" column="dnum"/>
<result property="dname" column="dname"/>
<result property="dmajor" column="dmajor"/>

<collection 
	property="hospitalVO" 
	javaType="java.util.List"
 	ofType="hvo"
 	>
 	<id property="hnum" column="hnum" javaType="int"/>
	<result property="hname" column="hname"/>
	<result property="otime" column="otime"/>
	<result property="ctime" column="ctime"/>
</collection>
</resultMap>

<select id="hospitalDoctorList" resultMap="hospitalDoctorResult">
select d.dnum , d.dname, d.dmajor ,h.hname,h.otime,h.ctime from doctor d , hospital h where d.hnum = h.hnum order by 1 asc
</select>


<resultMap type="doctorVO" id="DoctorDetailResult">
<id property="hnum" column ="hnum"/>
<result property="dnum" column="dnum"/>
<result property="dname" column="dname"/>
<result property="dmajor" column="dmajor"/>

<collection 
	property="hospitalVO" 
	javaType="java.util.List"
 	ofType="hvo"
 	>
 	<id property="hnum" column="hnum" javaType="int"/>
	<result property="hname" column="hname"/>
	<result property="otime" column="otime"/>
	<result property="ctime" column="ctime"/>
	<result property="hloc" column="hloc"/>
	
</collection>
</resultMap>

<select id="hospitalDoctorDetail" resultMap="DoctorCategoryResult">
select d.dnum , d.dname, d.dmajor ,h.hname,h.otime,h.ctime ,h.hloc from doctor d , hospital h where d.hnum = h.hnum and dnum = #{dnum}
</select>

<resultMap type="doctorVO" id="DoctorCategoryResult">
<id property="hnum" column ="hnum"/>
<result property="dnum" column="dnum"/>
<result property="dname" column="dname"/>
<result property="dmajor" column="dmajor"/>

<collection 
	property="hospitalVO" 
	javaType="java.util.List"
 	ofType="hvo"
 	>
 	<id property="hnum" column="hnum" javaType="int"/>
	<result property="hname" column="hname"/>
	<result property="otime" column="otime"/>
	<result property="ctime" column="ctime"/>
	<result property="hloc" column="hloc"/>
	
</collection>
</resultMap>

<select id="hospitalDoctorCategory" resultMap="DoctorCategoryResult">
select d.dnum , d.dname, d.dmajor ,h.hname,h.otime,h.ctime ,h.hloc from doctor d , hospital h where d.hnum = h.hnum and dmajor = #{dmajor}
</select>
  	
</mapper>